name: Daily run
on:
  workflow_dispatch: {}
  schedule:
    - cron: "0 0 * * *"
jobs:
  daily-run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - name: Setup Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.23.x'
      - name: Install dependencies
        run: go get .
      - name: Run the script
        run: go run main.go
      - name: Commit the changes
        run: |
          git add feeds/
          git config --global user.name "RSS feeds updater"
          git config --global user.email "username@users.noreply.github.com"
          git commit -a -m "feat: Updates the feeds"
          git push
